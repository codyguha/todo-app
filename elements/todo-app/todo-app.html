<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-material/paper-material.html">
<link rel="import" href="/bower_components/paper-fab/paper-fab.html">
<link rel="import" href="/bower_components/paper-input/paper-input.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/elements/todo-app/task-item.html">
<link rel="import" href="/bower_components/paper-toast/paper-toast.html">
<link rel="import" href="/bower_components/paper-card/paper-card.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<dom-module id="todo-app">
  <template>
    <style>
      :host {
        display: block;
        padding: 1em;
      }
      .list-input{
        padding: 1em;
        margin-bottom: 1em;
      }
      .task-container{
        @apply(--layout-vertical);
      }
      .task-card{
        margin-bottom: 1em;
      }
      .add-fab{
        margin-left: auto;
      }
    </style>
    <paper-material class="list-input" elevation="2">
      <h1>List</h1>
      
      <paper-input label="task" value="{{taskName}}"></paper-input>
      <paper-fab class="add-fab" icon="add" on-tap="addTask"></paper-fab>
    </paper-material>
    
    <div class="task-container">
      <template is="dom-repeat" items="{{tasks}}" index-as="i">
        <paper-card class="task-card" image="" elevation="1" animated-shadow="false">
          <div class="card-content">
            <task-item task-name="{{item}}"></task-item>
          </div>
          <div class="card-actions">
            <paper-button raised on-tap="removeTask">remove</paper-button>
          </div>
        </paper-card>        


      </template>
    </div>
    <paper-toast text="Please enter task." id="taskError"></paper-toast>
  </template>
  <script>
    Polymer({
      is: 'todo-app',
      properties: {
        tasks: {
          type: Array, 
          value: []
        },
        taskName: {
          type: String
        }
      },
      addTask: function(e){
        var task = this.taskName
        if (task) {
          this.push("tasks", task)
        } else {
          this.$.taskError.show()
        }
      },
      removeTask: function(e){
        var i = e.model.get("i")
        this.splice("tasks", i, 1)
      }
    });
  </script>
</dom-module>